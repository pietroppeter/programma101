<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>p5gui.nim</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>üê≥</text></svg>">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link rel='stylesheet' href='https://unpkg.com/normalize.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/pietroppeter/nimib/assets/atom-one-light.css'>
  <style>
.nb-box {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.nb-small {
  font-size: 0.8rem;
}
button.nb-small {
  float: right;
  padding: 2px;
  padding-right: 5px;
  padding-left: 5px;
}
section#source {
  display:none
}

.nb-output {
  line-height: 1.15;
}
</style>
  
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js"></script><body>
<header>
<div class="nb-box">
  <span><a href=".">üè°</a></span>
  <span><code>p5gui.nim</code></span>
  <span><a href="https://github.com/pietroppeter/programma101"><svg aria-hidden="true" width="1.2em" height="1.2em" style="vertical-align: middle;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27c.68 0 1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z" fill="#000"></path></svg></a></span>
</div>
<hr>
</header><main>

<p>Interface of p101 using p5nim:</p>
<ul>
<li>0 .. 9: push digit in register M</li>
<li>n: push - (negative sign) in register M</li>
<li>w: reset register M</li>
<li>v: push down (transfer from register M to register A), also prints M</li>
<li>+: sum A + M, also prints M and result A</li>
<li>-: difference A - M, also prints M and result A</li>
</ul>

<script defer>/* Generated by the Nim Compiler v1.6.10 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI1258291304 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1258291306 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1258291294 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI33555080 = {size: 0,kind: 41,base: null,node: null,finalizer: null};
var NTI1258291203 = {size: 0, kind: 16, base: null, node: null, finalizer: null};
var NTI33554439 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
NTI1258291203.base = NTI33555080;
var NNI1258291294 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI33555080, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33555080, name: "Field1", sons: null}]};
NTI1258291294.node = NNI1258291294;
var NNI1258291306 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI33555080, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33555080, name: "Field1", sons: null}]};
NTI1258291306.node = NNI1258291306;
var NNI1258291304 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI33555080, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33555080, name: "Field1", sons: null}]};
NTI1258291304.node = NNI1258291304;

function toJSStr(s_33556807) {
                    var Temporary5;
            var Temporary7;

  var result_33556808 = null;

    var res_33556842 = newSeq_33556825((s_33556807).length);
    var i_33556843 = 0;
    var j_33556844 = 0;
    Label1: do {
        Label2: while (true) {
        if (!(i_33556843 < (s_33556807).length)) break Label2;
          var c_33556845 = s_33556807[i_33556843];
          if ((c_33556845 < 128)) {
          res_33556842[j_33556844] = String.fromCharCode(c_33556845);
          i_33556843 += 1;
          }
          else {
            var helper_33556857 = newSeq_33556825(0);
            Label3: do {
                Label4: while (true) {
                if (!true) break Label4;
                  var code_33556858 = c_33556845.toString(16);
                  if ((((code_33556858) == null ? 0 : (code_33556858).length) == 1)) {
                  helper_33556857.push("%0");;
                  }
                  else {
                  helper_33556857.push("%");;
                  }
                  
                  helper_33556857.push(code_33556858);;
                  i_33556843 += 1;
                    if (((s_33556807).length <= i_33556843)) Temporary5 = true; else {                      Temporary5 = (s_33556807[i_33556843] < 128);                    }                  if (Temporary5) {
                  break Label3;
                  }
                  
                  c_33556845 = s_33556807[i_33556843];
                }
            } while (false);
++excHandler;
            Temporary7 = framePtr;
            try {
            res_33556842[j_33556844] = decodeURIComponent(helper_33556857.join(""));
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
            framePtr = Temporary7;
            res_33556842[j_33556844] = helper_33556857.join("");
            lastJSError = prevJSError;
            } finally {
            framePtr = Temporary7;
            }
          }
          
          j_33556844 += 1;
        }
    } while (false);
    if (res_33556842.length < j_33556844) { for (var i = res_33556842.length ; i < j_33556844 ; ++i) res_33556842.push(null); }
               else { res_33556842.length = j_33556844; };
    result_33556808 = res_33556842.join("");

  return result_33556808;

}

function makeNimstrLit(c_33556801) {
      var result = [];
  for (var i = 0; i < c_33556801.length; ++i) {
    result[i] = c_33556801.charCodeAt(i);
  }
  return result;
  

  
}

function mnewString(len_33556893) {
        return new Array(len_33556893);
  

  
}

function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;
  

  
}
var ConstSet1 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);

function nimCopy(dest_33557140, src_33557141, ti_33557142) {
  var result_33557151 = null;

    switch (ti_33557142.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer_33557131(ti_33557142))) {
      result_33557151 = src_33557141;
      }
      else {
        result_33557151 = [src_33557141[0], src_33557141[1]];
      }
      
      break;
    case 19:
            if (dest_33557140 === null || dest_33557140 === undefined) {
        dest_33557140 = {};
      }
      else {
        for (var key in dest_33557140) { delete dest_33557140[key]; }
      }
      for (var key in src_33557141) { dest_33557140[key] = src_33557141[key]; }
      result_33557151 = dest_33557140;
    
      break;
    case 18:
    case 17:
      if (!((ti_33557142.base == null))) {
      result_33557151 = nimCopy(dest_33557140, src_33557141, ti_33557142.base);
      }
      else {
      if ((ti_33557142.kind == 17)) {
      result_33557151 = (dest_33557140 === null || dest_33557140 === undefined) ? {m_type: ti_33557142} : dest_33557140;
      }
      else {
        result_33557151 = (dest_33557140 === null || dest_33557140 === undefined) ? {} : dest_33557140;
      }
      }
      nimCopyAux(result_33557151, src_33557141, ti_33557142.node);
      break;
    case 24:
    case 4:
    case 27:
    case 16:
            if (src_33557141 === null) {
        result_33557151 = null;
      }
      else {
        if (dest_33557140 === null || dest_33557140 === undefined || dest_33557140.length != src_33557141.length) {
          dest_33557140 = new Array(src_33557141.length);
        }
        result_33557151 = dest_33557140;
        for (var i = 0; i < src_33557141.length; ++i) {
          result_33557151[i] = nimCopy(result_33557151[i], src_33557141[i], ti_33557142.base);
        }
      }
    
      break;
    case 28:
            if (src_33557141 !== null) {
        result_33557151 = src_33557141.slice(0);
      }
    
      break;
    default: 
      result_33557151 = src_33557141;
      break;
    }

  return result_33557151;

}

function nimCharToStr(x_33556517) {
  var result_33556518 = [];

    result_33556518 = nimCopy(null, mnewString(1), NTI33554439);
    result_33556518[0] = x_33556517;

  return result_33556518;

}

function cstrToNimstr(c_33556804) {
      var ln = c_33556804.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_33556804.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else {
      if (ch < 2048) {
        result[r] = (ch >> 6) | 192;
      }
      else {
        if (ch < 55296 || ch >= 57344) {
          result[r] = (ch >> 12) | 224;
        }
        else {
            ++i;
            ch = 65536 + (((ch & 1023) << 10) | (c_33556804.charCodeAt(i) & 1023));
            result[r] = (ch >> 18) | 240;
            ++r;
            result[r] = ((ch >> 12) & 63) | 128;
        }
        ++r;
        result[r] = ((ch >> 6) & 63) | 128;
      }
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  return result;
  

  
}
if (!Math.trunc) {
  Math.trunc = function(v) {
    v = +v;
    if (!isFinite(v)) return v;
    return (v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);
  };
}

var objectID_620757154 = [0];
var lastKey_452984854 = [0];

function reset_1258291284(p_1258291285, r_1258291286) {
    Label1: do {
      var i_1258291291 = 0;
      var res_452984921 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(res_452984921 <= 23)) break Label3;
            i_1258291291 = res_452984921;
            p_1258291285.memory[r_1258291286][i_1258291291] = 32;
            res_452984921 += 1;
          }
      } while (false);
    } while (false);

  
}

function setup() {
    createCanvas(500.0, 500.0);
    background(200.0);

  
}

function newSeq_33556825(len_33556827) {
  var result_33556828 = [];

    result_33556828 = new Array(len_33556827); for (var i = 0 ; i < len_33556827 ; ++i) { result_33556828[i] = null; }
  return result_33556828;

}

function toFloat_1107296262(n_1107296263) {
  var result_1107296264 = 0.0;

    result_1107296264 = n_1107296263;

  return result_1107296264;

}

function isFatPointer_33557131(ti_33557132) {
  var result_33557133 = false;

  BeforeRet: do {
    result_33557133 = !((ConstSet1[ti_33557132.base.kind] != undefined));
    break BeforeRet;
  } while (false);

  return result_33557133;

}

function nimCopyAux(dest_33557144, src_33557145, n_33557146) {
    switch (n_33557146.kind) {
    case 0:
      break;
    case 1:
            dest_33557144[n_33557146.offset] = nimCopy(dest_33557144[n_33557146.offset], src_33557145[n_33557146.offset], n_33557146.typ);
    
      break;
    case 2:
          for (var i = 0; i < n_33557146.sons.length; i++) {
      nimCopyAux(dest_33557144, src_33557145, n_33557146.sons[i]);
    }
    
      break;
    case 3:
            dest_33557144[n_33557146.offset] = nimCopy(dest_33557144[n_33557146.offset], src_33557145[n_33557146.offset], n_33557146.typ);
      for (var i = 0; i < n_33557146.sons.length; ++i) {
        nimCopyAux(dest_33557144, src_33557145, n_33557146.sons[i][1]);
      }
    
      break;
    }

  
}

function addChars_251658415(result_251658417, result_251658417_Idx, x_251658418, start_251658419, n_251658420) {
    var old_251658421 = (result_251658417[result_251658417_Idx]).length;
    (result_251658417[result_251658417_Idx].length = (old_251658421 + n_251658420));
    Label1: do {
      var iHEX60gensym4_251658435 = 0;
      var i_452984937 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(i_452984937 < n_251658420)) break Label3;
            iHEX60gensym4_251658435 = i_452984937;
            result_251658417[result_251658417_Idx][(old_251658421 + iHEX60gensym4_251658435)] = x_251658418.charCodeAt((start_251658419 + iHEX60gensym4_251658435));
            i_452984937 += 1;
          }
      } while (false);
    } while (false);

  
}

function addChars_251658411(result_251658413, result_251658413_Idx, x_251658414) {
    addChars_251658415(result_251658413, result_251658413_Idx, x_251658414, 0, ((x_251658414) == null ? 0 : (x_251658414).length));

  
}

function addInt_251658405(result_251658406, result_251658406_Idx, x_251658407) {
    addChars_251658411(result_251658406, result_251658406_Idx, ((x_251658407) + ""));

  
}

function HEX24_318767113(x_318767114) {
  var result_318767115 = [[]];

    addInt_251658405(result_318767115, 0, x_318767114);

  return result_318767115[0];

}

function toString_1258291253(w_1258291254) {
  var result_1258291255 = [];

    Label1: do {
      var i_1258291264 = 0;
      var res_452984931 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(res_452984931 <= 23)) break Label3;
            i_1258291264 = res_452984931;
            if ((w_1258291254[i_1258291264] <= 9)) {
            result_1258291255.push.apply(result_1258291255, HEX24_318767113(w_1258291254[i_1258291264]));;
            }
            else {
            result_1258291255.push.apply(result_1258291255, nimCharToStr(w_1258291254[i_1258291264]));;
            }
            
            res_452984931 += 1;
          }
      } while (false);
    } while (false);

  return result_1258291255;

}

function get_1258291269(p_1258291270, r_1258291271) {
  var result_1258291272 = [];

    result_1258291272 = nimCopy(null, toString_1258291253(p_1258291270.memory[r_1258291271]), NTI33554439);

  return result_1258291272;

}

function draw() {
    background(200.0);
    var y_452984860 = 20;
    Label1: do {
      var line_452984879 = [];
      var i_452984925 = 0;
      var L_452984926 = (paper_452984857[0]).length;
      Label2: do {
          Label3: while (true) {
          if (!(i_452984925 < L_452984926)) break Label3;
            line_452984879 = paper_452984857[0][i_452984925];
            text(toJSStr(line_452984879), 20.0, toFloat_1107296262(y_452984860));
            y_452984860 += 20;
            i_452984925 += 1;
          }
      } while (false);
    } while (false);
    text(toJSStr((makeNimstrLit("lastKey: ") || []).concat(nimCharToStr(lastKey_452984854[0]) || [])), 300.0, 20.0);
    text(toJSStr((makeNimstrLit("      M: ") || []).concat(get_1258291269(p_452984856[0], 0) || [])), 300.0, 40.0);
    text(toJSStr((makeNimstrLit("      A: ") || []).concat(get_1258291269(p_452984856[0], 1) || [])), 300.0, 60.0);
    text(toJSStr((makeNimstrLit("      R: ") || []).concat(get_1258291269(p_452984856[0], 2) || [])), 300.0, 80.0);

  
}

function push_1258291223(w_1258291224, b_1258291225) {
    Label1: do {
      var i_1258291234 = 0;
      var i_452984940 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(i_452984940 < 23)) break Label3;
            i_1258291234 = i_452984940;
            w_1258291224[i_1258291234] = w_1258291224[(i_1258291234 + 1)];
            i_452984940 += 1;
          }
      } while (false);
    } while (false);
    w_1258291224[23] = b_1258291225;

  
}

function push_1258291239(p_1258291240, d_1258291241) {
    push_1258291223(p_1258291240.memory[0], (d_1258291241 & 0xff));

  
}

function pushDown_1258291273(p_1258291274) {
    p_1258291274.memory[1] = nimCopy(p_1258291274.memory[1], p_1258291274.memory[0], NTI1258291203);

  
}

function zeroIfEmpty_1258291301(b_1258291302) {
  var result_1258291303 = 0;

  BeforeRet: do {
    if ((b_1258291302 == 32)) {
    result_1258291303 = 0;
    break BeforeRet;
    }
    else {
      result_1258291303 = b_1258291302;
      break BeforeRet;
    }
    
  } while (false);

  return result_1258291303;

}

function divmod10_1258291309(b_1258291310) {
  var result_1258291311 = {Field0: 0, Field1: 0};

    var colontmp__452984948 = (b_1258291310 % 10);
    var colontmp__452984949 = ((b_1258291310 / 10) & 0xff);
    result_1258291311 = nimCopy(result_1258291311, {Field0: colontmp__452984948, Field1: colontmp__452984949}, NTI1258291294);

  return result_1258291311;

}

function comp9_1258291326(b_1258291327, c_1258291328) {
  var result_1258291329 = {Field0: 0, Field1: 0};

    result_1258291329 = nimCopy(result_1258291329, divmod10_1258291309(((((9 - b_1258291327) & 0xff) + c_1258291328) & 0xff)), NTI1258291306);

  return result_1258291329;

}

function comp9_1258291330(w_1258291331, c_1258291332) {
  var result_1258291333 = new Uint8Array(24);

    var c_1258291334 = c_1258291332;
    Label1: do {
      var i_1258291340 = 0;
      var res_452984946 = 23;
      Label2: do {
          Label3: while (true) {
          if (!(0 <= res_452984946)) break Label3;
            i_1258291340 = res_452984946;
            var __1258291341 = comp9_1258291326(zeroIfEmpty_1258291301(w_1258291331[i_1258291340]), c_1258291334);
            result_1258291333[i_1258291340] = __1258291341["Field0"];
            c_1258291334 = __1258291341["Field1"];
            res_452984946 -= 1;
          }
      } while (false);
    } while (false);

  return result_1258291333;

}

function denormalize_1258291363(r_1258291364) {
    var doComp9_1258291365 = false;
    Label1: do {
      var i_1258291370 = 0;
      var res_452984943 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(res_452984943 <= 23)) break Label3;
            i_1258291370 = res_452984943;
            if ((r_1258291364[i_1258291370] == 45)) {
            doComp9_1258291365 = true;
            r_1258291364[i_1258291370] = 0;
            }
            else {
              r_1258291364[i_1258291370] = zeroIfEmpty_1258291301(r_1258291364[i_1258291370]);
            }
            
            res_452984943 += 1;
          }
      } while (false);
    } while (false);
    if (doComp9_1258291365) {
    r_1258291364 = nimCopy(r_1258291364, comp9_1258291330(r_1258291364, 1), NTI1258291203);
    }
    

  
}

function sum10_1258291321(a_1258291322, b_1258291323, c_1258291324) {
  var result_1258291325 = {Field0: 0, Field1: 0};

    result_1258291325 = nimCopy(result_1258291325, divmod10_1258291309(((((a_1258291322 + b_1258291323) & 0xff) + c_1258291324) & 0xff)), NTI1258291304);

  return result_1258291325;

}

function sum_1258291371(r_1258291372, a_1258291373) {
    var carry_1258291374 = 0;
    Label1: do {
      var i_1258291380 = 0;
      var res_452984951 = 23;
      Label2: do {
          Label3: while (true) {
          if (!(0 <= res_452984951)) break Label3;
            i_1258291380 = res_452984951;
            var __1258291381 = sum10_1258291321(r_1258291372[i_1258291380], a_1258291373[i_1258291380], carry_1258291374);
            r_1258291372[i_1258291380] = __1258291381["Field0"];
            carry_1258291374 = __1258291381["Field1"];
            res_452984951 -= 1;
          }
      } while (false);
    } while (false);

  
}

function normalize_1258291347(w_1258291348) {
          var Temporary3;
          var Temporary6;

    if ((w_1258291348[0] == 0)) {
    var i_1258291349 = 0;
    Label1: do {
        Label2: while (true) {
          if (!(w_1258291348[i_1258291349] == 0)) Temporary3 = false; else {            Temporary3 = (i_1258291349 < 23);          }        if (!Temporary3) break Label2;
          w_1258291348[i_1258291349] = 32;
          i_1258291349 += 1;
        }
    } while (false);
    }
    else {
    if ((w_1258291348[0] == 9)) {
    var i_1258291354 = 0;
    Label4: do {
        Label5: while (true) {
          if (!(w_1258291348[i_1258291354] == 9)) Temporary6 = false; else {            Temporary6 = (i_1258291354 < 23);          }        if (!Temporary6) break Label5;
          w_1258291348[i_1258291354] = 32;
          i_1258291354 += 1;
        }
    } while (false);
    w_1258291348[(i_1258291354 - 1)] = 45;
    Label7: do {
        Label8: while (true) {
        if (!(i_1258291354 < 23)) break Label8;
          w_1258291348[i_1258291354] = ((9 - w_1258291348[i_1258291354]) & 0xff);
          i_1258291354 += 1;
        }
    } while (false);
    }
    }

  
}

function sum_1258291382(p_1258291383) {
    p_1258291383.memory[2] = nimCopy(p_1258291383.memory[2], p_1258291383.memory[0], NTI1258291203);
    denormalize_1258291363(p_1258291383.memory[2]);
    denormalize_1258291363(p_1258291383.memory[1]);
    sum_1258291371(p_1258291383.memory[2], p_1258291383.memory[1]);
    normalize_1258291347(p_1258291383.memory[2]);
    p_1258291383.memory[1] = nimCopy(p_1258291383.memory[1], p_1258291383.memory[2], NTI1258291203);

  
}

function pushMinus_1258291251(p_1258291252) {
    push_1258291223(p_1258291252.memory[0], 45);

  
}

function difference_1258291384(p_1258291385) {
    p_1258291385.memory[2] = nimCopy(p_1258291385.memory[2], p_1258291385.memory[0], NTI1258291203);
    denormalize_1258291363(p_1258291385.memory[2]);
    p_1258291385.memory[2] = nimCopy(p_1258291385.memory[2], comp9_1258291330(p_1258291385.memory[2], 1), NTI1258291203);
    denormalize_1258291363(p_1258291385.memory[1]);
    sum_1258291371(p_1258291385.memory[2], p_1258291385.memory[1]);
    normalize_1258291347(p_1258291385.memory[2]);
    p_1258291385.memory[1] = nimCopy(p_1258291385.memory[1], p_1258291385.memory[2], NTI1258291203);

  
}

function keyPressed() {
    var Temporary1;

    lastKey_452984854[0] = (Temporary1 = cstrToNimstr(key), Temporary1)[0];
    switch (lastKey_452984854[0]) {
    case 48:
    case 49:
    case 50:
    case 51:
    case 52:
    case 53:
    case 54:
    case 55:
    case 56:
    case 57:
      push_1258291239(p_452984856[0], (lastKey_452984854[0] - 48));
      break;
    case 118:
      pushDown_1258291273(p_452984856[0]);
      paper_452984857[0].push((get_1258291269(p_452984856[0], 0) || []).concat(makeNimstrLit(" \xE2\xAC\x87\xEF\xB8\x8FM") || []));;
      break;
    case 119:
      reset_1258291284(p_452984856[0], 0);
      break;
    case 43:
      sum_1258291382(p_452984856[0]);
      paper_452984857[0].push((get_1258291269(p_452984856[0], 0) || []).concat(makeNimstrLit(" +") || []));;
      paper_452984857[0].push((get_1258291269(p_452984856[0], 1) || []).concat(makeNimstrLit(" A") || []));;
      break;
    case 110:
      pushMinus_1258291251(p_452984856[0]);
      break;
    case 45:
      difference_1258291384(p_452984856[0]);
      paper_452984857[0].push((get_1258291269(p_452984856[0], 0) || []).concat(makeNimstrLit(" -") || []));;
      paper_452984857[0].push((get_1258291269(p_452984856[0], 1) || []).concat(makeNimstrLit(" A") || []));;
      break;
    default: 
      break;
    }

  
}
var p_452984856 = [{memory: [new Uint8Array(24), new Uint8Array(24), new Uint8Array(24), new Uint8Array(24), new Uint8Array(24), new Uint8Array(24), new Uint8Array(24), new Uint8Array(24), new Uint8Array(24), new Uint8Array(24)]}];
var paper_452984857 = [[]];
reset_1258291284(p_452984856[0], 0);
reset_1258291284(p_452984856[0], 1);
reset_1258291284(p_452984856[0], 2);
</script>
</main>
<footer>
<hr>
<div class="nb-box">
  <span><span class="nb-small">made with <a href="https://pietroppeter.github.io/nimib/">nimib üê≥</a></span></span>
  <span></span>
  <span><button class="nb-small" id="show" onclick="toggleSourceDisplay()">Show Source</button></span>
</div>
</footer>
<section id="source">
<pre><code class="nim hljs"><span class="hljs-keyword">import</span> nimib, p5

nbInit
nbUseP5
nbText: <span class="hljs-string">&quot;&quot;&quot;
Interface of p101 using p5nim:
- 0 .. 9: push digit in register M
- n: push - (negative sign) in register M
- w: reset register M
- v: push down (transfer from register M to register A), also prints M
- +: sum A + M, also prints M and result A
- -: difference A - M, also prints M and result A
&quot;&quot;&quot;</span>
nbJsFromCode:
  <span class="hljs-keyword">import</span> strutils
  <span class="hljs-keyword">var</span> lastKey: <span class="hljs-built_in">char</span>

  <span class="hljs-keyword">import</span> p101

  <span class="hljs-keyword">var</span> p = <span class="hljs-type">Perottina</span>()
  <span class="hljs-keyword">var</span> paper: <span class="hljs-built_in">seq</span>[<span class="hljs-built_in">string</span>]

  p.reset <span class="hljs-type">M</span>
  p.reset <span class="hljs-type">A</span>
  p.reset <span class="hljs-type">R</span>

  setup:
    createCanvas(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>)
    background(<span class="hljs-number">200</span>)

  draw:
    background(<span class="hljs-number">200</span>)
    <span class="hljs-keyword">var</span> y = <span class="hljs-number">20</span>
    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> paper:
      text(line, <span class="hljs-number">20</span>, y)
      y += <span class="hljs-number">20</span>
    
    text(<span class="hljs-string">&quot;lastKey: &quot;</span> &amp; $lastKey, <span class="hljs-number">300</span>, <span class="hljs-number">20</span>)
    text(<span class="hljs-string">&quot;      M: &quot;</span> &amp; $(p.get <span class="hljs-type">M</span>), <span class="hljs-number">300</span>, <span class="hljs-number">40</span>)
    text(<span class="hljs-string">&quot;      A: &quot;</span> &amp; $(p.get <span class="hljs-type">A</span>), <span class="hljs-number">300</span>, <span class="hljs-number">60</span>)
    text(<span class="hljs-string">&quot;      R: &quot;</span> &amp; $(p.get <span class="hljs-type">R</span>), <span class="hljs-number">300</span>, <span class="hljs-number">80</span>)

  keyPressed:
    lastKey = ($key)[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">case</span> lastKey
    <span class="hljs-keyword">of</span> <span class="hljs-string">'0'</span> .. <span class="hljs-string">'9'</span>:
      p.push ord(lastKey) - ord(<span class="hljs-string">'0'</span>)
    <span class="hljs-keyword">of</span> <span class="hljs-string">'v'</span>:
      p.pushDown
      paper.add (p.get <span class="hljs-type">M</span>) &amp; <span class="hljs-string">&quot; ‚¨áÔ∏èM&quot;</span>
    <span class="hljs-keyword">of</span> <span class="hljs-string">'w'</span>:
      p.reset <span class="hljs-type">M</span>
    <span class="hljs-keyword">of</span> <span class="hljs-string">'+'</span>:
      p.sum
      paper.add (p.get <span class="hljs-type">M</span>) &amp; <span class="hljs-string">&quot; +&quot;</span>
      paper.add (p.get <span class="hljs-type">A</span>) &amp; <span class="hljs-string">&quot; A&quot;</span>
    <span class="hljs-keyword">of</span> <span class="hljs-string">'n'</span>:
      p.pushMinus
    <span class="hljs-keyword">of</span> <span class="hljs-string">'-'</span>:
      p.difference
      paper.add (p.get <span class="hljs-type">M</span>) &amp; <span class="hljs-string">&quot; -&quot;</span>
      paper.add (p.get <span class="hljs-type">A</span>) &amp; <span class="hljs-string">&quot; A&quot;</span>
    <span class="hljs-keyword">else</span>:
      <span class="hljs-keyword">discard</span>

nbSave</code></pre>
</section><script>
function toggleSourceDisplay() {
  var btn = document.getElementById("show")
  var source = document.getElementById("source");
  if (btn.innerHTML=="Show Source") {
    btn.innerHTML = "Hide Source";
    source.style.display = "block";
  } else {
    btn.innerHTML = "Show Source";
    source.style.display = "none";
  }
}
</script></body>
</html>